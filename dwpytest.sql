-- PRUEBA A - BASE DE DATOS SQL
-- Francisco Rolando Aguilera Portillo
-- BASE DE PRUEBA "DWPYTEST"

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

CREATE DATABASE IF NOT EXISTS dwpytest DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
USE dwpytest;

DROP TABLE IF EXISTS cliente;
CREATE TABLE IF NOT EXISTS cliente (
  id_cliente int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  cmf_total int(11) DEFAULT NULL,
  credit_status char(1) DEFAULT NULL,
  PRIMARY KEY (id_cliente)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4;

INSERT INTO cliente VALUES
(1, NULL, 'O'),
(2, NULL, 'O'),
(3, NULL, 'S'),
(4, NULL, 'O'),
(5, NULL, 'S'),
(6, NULL, 'O'),
(7, NULL, 'S'),
(8, NULL, 'O'),
(9, NULL, 'S'),
(10, NULL, 'O'),
(11, NULL, 'S'),
(12, NULL, 'O'),
(13, NULL, 'S'),
(14, NULL, 'S'),
(15, NULL, 'O');

DROP TABLE IF EXISTS typeii_factura_h;
CREATE TABLE IF NOT EXISTS typeii_factura_h (
  id_factura int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  id_cliente int(10) UNSIGNED NOT NULL,
  fecha_factura varchar(25) DEFAULT NULL,
  monto_factura int(11) DEFAULT NULL,
  PRIMARY KEY (id_factura,id_cliente),
  KEY id_cliente (id_cliente)
) ENGINE=InnoDB AUTO_INCREMENT=40 DEFAULT CHARSET=utf8mb4;

INSERT INTO typeii_factura_h VALUES
(1, 1, '26-04-2023', 540000),
(2, 4, '26-04-2023', 450000),
(3, 3, '26-04-2023', 1980000),
(4, 15, '26-04-2023', 750000),
(5, 7, '27-04-2023', 732100),
(6, 15, '27-04-2023', 143000),
(7, 1, '27-04-2023', 670000),
(8, 5, '28-04-2023', 132000),
(9, 4, '28-04-2023', 670000),
(10, 11, '29-04-2023', 65000),
(11, 8, '29-04-2023', 54000),
(12, 5, '30-04-2023', 54000),
(13, 12, '30-04-2023', 2800000),
(14, 3, '30-04-2023', 50000),
(15, 2, '30-04-2023', 1980000),
(16, 6, '30-04-2023', 750000),
(17, 10, '30-04-2023', 670000),
(18, 11, '30-04-2023', 132000),
(19, 14, '30-04-2023', 670000),
(20, 1, '01-05-2023', 642000),
(21, 2, '01-05-2023', 344600),
(22, 3, '01-05-2023', 54700),
(23, 4, '01-05-2023', 32000),
(24, 5, '01-05-2023', 33200),
(25, 6, '01-05-2023', 890000),
(26, 7, '01-05-2023', 195000),
(27, 8, '01-05-2023', 347000),
(28, 9, '01-05-2023', 65400),
(29, 10, '01-05-2023', 1567000),
(30, 11, '01-05-2023', 540000),
(31, 12, '01-05-2023', 750000),
(32, 13, '01-05-2023', 145000),
(33, 14, '01-05-2023', 670000),
(34, 15, '01-05-2023', 145000),
(35, 1, '01-05-2023', 540000),
(36, 11, '01-05-2023', 750000),
(37, 15, '01-05-2023', 670000),
(38, 2, '01-05-2023', 132000),
(39, 13, '01-05-2023', 33200);


ALTER TABLE typeii_factura_h
  ADD CONSTRAINT typeii_factura_h_ibfk_1 FOREIGN KEY (id_cliente) REFERENCES `cliente` (id_cliente) ON DELETE NO ACTION ON UPDATE NO ACTION;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
